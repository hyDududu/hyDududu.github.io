<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="nodejs,Web编程," />










<meta name="description" content="项目概览本项目选取了5个代表性的新闻网站：中国新闻网、新浪新闻网、新华网、光明网和人民网 建立nodejs爬虫。通过针对不同网站的新闻页面进行分析，我们爬取出编码、关键词、标题、时间、作者、内容、摘要、来源等结构化信息，并将之存储在MySQL数据库中。之后，我们构建了支持 分项全文搜索 和 关键词热度分析 的前端页面，可对标题、作者、关键词 单独或联合索引，结果返回满足要求的新闻信息；也可通过搜索">
<meta property="og:type" content="article">
<meta property="og:title" content="Web编程期中实践——Nodejs新闻爬虫及查询网站">
<meta property="og:url" content="https://hydududu.github.io/2021/04/27/Web%E7%BC%96%E7%A8%8B%E6%9C%9F%E4%B8%AD%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94Nodejs%E6%96%B0%E9%97%BB%E7%88%AC%E8%99%AB%E5%8F%8A%E6%9F%A5%E8%AF%A2%E7%BD%91%E7%AB%99/index.html">
<meta property="og:site_name" content="hyDududu">
<meta property="og:description" content="项目概览本项目选取了5个代表性的新闻网站：中国新闻网、新浪新闻网、新华网、光明网和人民网 建立nodejs爬虫。通过针对不同网站的新闻页面进行分析，我们爬取出编码、关键词、标题、时间、作者、内容、摘要、来源等结构化信息，并将之存储在MySQL数据库中。之后，我们构建了支持 分项全文搜索 和 关键词热度分析 的前端页面，可对标题、作者、关键词 单独或联合索引，结果返回满足要求的新闻信息；也可通过搜索">
<meta property="og:locale">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210425203418448.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210508113037380.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210426214627703.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021050811333434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210508113124100.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210426222239862.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210427221943998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210423232248952.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210427210801214.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210427210655736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210427220437740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2021-04-27T14:22:00.000Z">
<meta property="article:modified_time" content="2022-03-27T06:35:35.215Z">
<meta property="article:author" content="hyDududu">
<meta property="article:tag" content="nodejs">
<meta property="article:tag" content="Web编程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20210425203418448.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://hyDududu.github.io/2021/04/27/Web编程期中实践——Nodejs新闻爬虫及查询网站/"/>





  <title>Web编程期中实践——Nodejs新闻爬虫及查询网站 | hyDududu</title>
  








<meta name="generator" content="Hexo 6.1.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">hyDududu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hyDududu.github.io/2021/04/27/Web%E7%BC%96%E7%A8%8B%E6%9C%9F%E4%B8%AD%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94Nodejs%E6%96%B0%E9%97%BB%E7%88%AC%E8%99%AB%E5%8F%8A%E6%9F%A5%E8%AF%A2%E7%BD%91%E7%AB%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hyDududu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Web编程期中实践——Nodejs新闻爬虫及查询网站</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-04-27T22:22:00+08:00">
                2021-04-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index">
                    <span itemprop="name">课程作业</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="项目概览"><a href="#项目概览" class="headerlink" title="项目概览"></a>项目概览</h1><p><img src="https://img-blog.csdnimg.cn/20210425203418448.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>本项目选取了5个代表性的新闻网站：<strong>中国新闻网、新浪新闻网、新华网、光明网和人民网</strong> 建立nodejs爬虫。通过针对不同网站的新闻页面进行分析，我们爬取出<strong>编码、关键词、标题、时间、作者、内容、摘要、来源</strong>等结构化信息，并将之存储在MySQL数据库中。<br>之后，我们构建了支持 分项全文搜索 和 关键词热度分析 的前端页面，可对标题、作者、关键词 单独或联合索引，结果返回满足要求的新闻信息；也可通过搜索关键词，获取不同日期中包含该词的新闻数目。</p>
<span id="more"></span>

<h2 id="使用工具包"><a href="#使用工具包" class="headerlink" title="使用工具包"></a>使用工具包</h2><h3 id="请求模块"><a href="#请求模块" class="headerlink" title="请求模块"></a>请求模块</h3><p>在该项目中，我们使用requerst方式获取网页内容，并人为将浏览器的user-agent信息填充到headers 参数中，从而模拟浏览器，避免被待爬取的目标新闻网站屏蔽。<br>同时，在程序运行时，请求过程较为漫长，我们没必要阻塞地等待请求的完成再继续处理下一个任务，因此，我们通过使用回调函数来异步地爬取网页的url，即爬取url的同时就能对所得url进行解析，这样能有效提高网页爬取的效率。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myRequest = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//防止网站屏蔽我们的爬虫</span></span><br><span class="line"><span class="keyword">var</span> headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.65 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//request模块异步fetch url</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">url, callback</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> options = &#123;</span><br><span class="line">        <span class="attr">url</span>: url,</span><br><span class="line">        <span class="attr">encoding</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="comment">//proxy: &#x27;http://x.x.x.x:8080&#x27;,</span></span><br><span class="line">        <span class="attr">headers</span>: headers,</span><br><span class="line">        <span class="attr">timeout</span>: <span class="number">10000</span> </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">myRequest</span>(options, callback)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="数据解析模块"><a href="#数据解析模块" class="headerlink" title="数据解析模块"></a>数据解析模块</h3><p>在该项目中，我们调用 cheerio 模块来筛选和提取网页中的信息，调用iconv-lite模块来解析编码，同时也通过date-utils日期工具类来处理时间相关的数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myCheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myIconv = <span class="built_in">require</span>(<span class="string">&#x27;iconv-lite&#x27;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;date-utils&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="存储网页信息模块"><a href="#存储网页信息模块" class="headerlink" title="存储网页信息模块"></a>存储网页信息模块</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建数据库连接池</span></span><br><span class="line"><span class="keyword">var</span> pool = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;crawl&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query = <span class="keyword">function</span>(<span class="params">sql, sqlparam, callback</span>) &#123;</span><br><span class="line">    pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span>(<span class="params">err, conn</span>) &#123;  <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="title function_">callback</span>(err, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">            <span class="comment">// pool.end(callback);</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            conn.<span class="title function_">query</span>(sql, sqlparam, <span class="keyword">function</span>(<span class="params">qerr, vals, fields</span>) &#123;</span><br><span class="line">                conn.<span class="title function_">release</span>(); <span class="comment">//释放连接 </span></span><br><span class="line">                <span class="title function_">callback</span>(qerr, vals, fields); <span class="comment">//事件驱动回调 </span></span><br><span class="line">                <span class="comment">// pool.end(callback);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query_noparam = <span class="keyword">function</span>(<span class="params">sql, callback</span>) &#123;</span><br><span class="line">    pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span>(<span class="params">err, conn</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="title function_">callback</span>(err, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            conn.<span class="title function_">query</span>(sql, <span class="keyword">function</span>(<span class="params">qerr, vals, fields</span>) &#123;</span><br><span class="line">                conn.<span class="title function_">release</span>(); <span class="comment">//释放连接 </span></span><br><span class="line">                <span class="title function_">callback</span>(qerr, vals, fields); <span class="comment">//事件驱动回调 </span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">query</span> = query;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">query_noparam</span> = query_noparam;</span><br></pre></td></tr></table></figure>
<h3 id="前端网页展示模块"><a href="#前端网页展示模块" class="headerlink" title="前端网页展示模块"></a>前端网页展示模块</h3><p>我们使用express脚手架来创建一个网站框架，在该项目目录下的cmd中输入 <strong>express -e search_site</strong> 生成一个名为 search_site 文件夹，而搭建前端我们需使用到数据库中的信息，故将mysql.js也拷贝进该文件夹。<br>之后cmd切换至search_site目录下，运行 <strong>npm install mysql -save</strong>、<strong>npm install</strong>，将mysql包安装到该项目中，并加载完依赖项，完成初步的网站搭建。</p>
<p>·</p>
<h1 id="网页爬取"><a href="#网页爬取" class="headerlink" title="网页爬取"></a>网页爬取</h1><h2 id="网站分析及爬虫设计"><a href="#网站分析及爬虫设计" class="headerlink" title="网站分析及爬虫设计"></a>网站分析及爬虫设计</h2><p>此处我们以人民网下的中国gongchandang新闻网为例进行分析。</p>
<h3 id="新闻URL获取"><a href="#新闻URL获取" class="headerlink" title="新闻URL获取"></a>新闻URL获取</h3><p>首先观察网页链接，均是 <em><a target="_blank" rel="noopener" href="http://jhsjk.people.cn/result/x">http://jhsjk.people.cn/result/x</a></em> 形式，最后所跟数字代表分页的页数，因此，我们可以通过设置循环更改页数来爬取不同分页的具体新闻链接。<br><img src="https://img-blog.csdnimg.cn/20210508113037380.png" alt="在这里插入图片描述"></p>
<p>先尝试爬取该网页，然后分析得到的各链接，可以看到下图红框标注部分才是我们想得到的新闻页面，由此得知这些新闻链接都以 <em><a target="_blank" rel="noopener" href="http://jhsjk.people.cn/article/32038656">http://jhsjk.people.cn/article/32038656</a></em> 的形式组织，故我们检验所爬取链接是否正确的正则表达式应设为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url_reg = <span class="regexp">/\/article\/(\d&#123;8&#125;)/</span>  <span class="comment">// 匹配“/article/8位数字”</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210426214627703.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>同时，我们也注意到所得新闻链接的格式与总网页的链接格式不一致，故对得到结果进行人为转换，若为 <em>http:&#x2F;&#x2F;</em> 开头的直接获取，若为 <em>&#x2F;&#x2F;</em> 开头则认为添上 <em>http:</em> 头，若不是这两种形式，则按照 <em>domin_people</em> 的格式加上所得url（此处是一个小坑，即不能直接在 <em>seedUrl_people</em> 基础上加所得url），最后用url的正则表达式进行判断，获取正确链接。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> domin_people = <span class="string">&#x27;http://jhsjk.people.cn/&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> seedUrl_people = <span class="string">&#x27;http://jhsjk.people.cn/result/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">seedget_People</span>(<span class="params">seedURL, url_reg, source_name, title_format, date_format, author_format, content_format, source_format</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">        seedUrl = seedURL + <span class="title class_">String</span>(i);</span><br><span class="line">        <span class="comment">// console.log(seedURL);</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_">request</span>(seedUrl, <span class="keyword">function</span> (<span class="params">err, res, body</span>) &#123; <span class="comment">//读取种子页面</span></span><br><span class="line">            <span class="comment">// try &#123;</span></span><br><span class="line">            <span class="comment">//用iconv转换编码</span></span><br><span class="line">            <span class="keyword">var</span> html = myIconv.<span class="title function_">decode</span>(body, myEncoding);</span><br><span class="line">            <span class="comment">//准备用cheerio解析html</span></span><br><span class="line">            <span class="keyword">var</span> $ = myCheerio.<span class="title function_">load</span>(html, &#123; <span class="attr">decodeEntities</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">            <span class="comment">// &#125; catch (e) &#123; console.log(&#x27;读种子页面并转码出错：&#x27; + e) &#125;;</span></span><br><span class="line">            <span class="keyword">var</span> seedurl_news;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                seedurl_news = <span class="built_in">eval</span>(seedURL_format);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;url列表所处的html块识别出错：&#x27;</span> + e) &#125;;</span><br><span class="line">            seedurl_news.<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">i, e</span>) &#123; <span class="comment">//遍历种子页面里所有的a链接</span></span><br><span class="line">                <span class="keyword">var</span> myURL = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//得到具体新闻url</span></span><br><span class="line">                    <span class="keyword">var</span> href = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    href = $(e).<span class="title function_">attr</span>(<span class="string">&quot;href&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (href == <span class="literal">undefined</span>) <span class="keyword">return</span>;</span><br><span class="line">                    <span class="keyword">if</span> (href.<span class="title function_">toLowerCase</span>().<span class="title function_">indexOf</span>(<span class="string">&#x27;http://&#x27;</span>) &gt;= <span class="number">0</span>) myURL = href;  <span class="comment">// 匹配http://开头的</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (href.<span class="title function_">startsWith</span>(<span class="string">&#x27;//&#x27;</span>)) myURL = <span class="string">&#x27;http:&#x27;</span> + href;  <span class="comment">// //开头的</span></span><br><span class="line">                    <span class="keyword">else</span> myURL = domin_people.<span class="title function_">substr</span>(<span class="number">0</span>, domin_people.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>) + href;  <span class="comment">// 其他</span></span><br><span class="line">                    <span class="comment">// console.log(&quot;myurl:  &quot; + myURL);</span></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;识别种子页面中的新闻链接出错：&#x27;</span> + e) &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!url_reg.<span class="title function_">test</span>(myURL)) &#123;</span><br><span class="line">                    <span class="comment">// console.log(myURL);</span></span><br><span class="line">                    <span class="keyword">return</span>; <span class="comment">//检验是否符合新闻url的正则表达式</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="新闻具体内容获取"><a href="#新闻具体内容获取" class="headerlink" title="新闻具体内容获取"></a>新闻具体内容获取</h3><p>要想获取新闻页的具体内容，我们得善用开发者工具、善于查询网页源代码。如下所示，通过在源代码中搜索keywords可以找到其所在位置，由此构造爬虫代码的获取内容格式。<br><img src="https://img-blog.csdnimg.cn/2021050811333434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>同理，我们也依次在开发者工具中定位了各项所需内容的位置。</p>
<p><img src="https://img-blog.csdnimg.cn/20210508113124100.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210426222239862.png" alt="在这里插入图片描述"><br>其中，部分class有2项，中间以空格隔开，这表示它有2个名字，我们随意使用一个即可，由此，我们对各内容的属性选择器格式定义如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> seedURL_format = <span class="string">&quot;$(&#x27;a&#x27;)&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> keywords_format = <span class="string">&quot; $(&#x27;meta[name=\&quot;keywords\&quot;]&#x27;).eq(0).attr(\&quot;content\&quot;)&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> desc_format = <span class="string">&quot; $(&#x27;meta[name=\&quot;description\&quot;]&#x27;).eq(0).attr(\&quot;content\&quot;)&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> title_format_people = <span class="string">&quot;$(&#x27;.d2txt&#x27;).find(&#x27;h1&#x27;).text()&quot;</span>;  <span class="comment">// 找d2txt下的h1</span></span><br><span class="line"><span class="keyword">var</span> date_format_people = <span class="string">&quot;$(&#x27;.d2txt_1&#x27;).text()&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> author_format_people = <span class="string">&quot;$(&#x27;.editor&#x27;).text()&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> content_format_people = <span class="string">&quot;$(&#x27;.d2txt_con&#x27;).text()&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> source_format_people = <span class="string">&quot;$(&#x27;.d2txt_1&#x27;).text()&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/((\d&#123;4&#125;|\d&#123;2&#125;)(\-|\/|\.)\d&#123;1,2&#125;\3\d&#123;1,2&#125;)|(\d&#123;4&#125;年\d&#123;1,2&#125;月\d&#123;1,2&#125;日)/</span></span><br></pre></td></tr></table></figure>
<p>之后，我们又通过myIconv、cheerio来转码、解析url以获取目标内容。<br>此处有2点需注意，一是对时间的转换，人为将年月日转换为Date的形式再转为可以存进数据库的格式。<br>二是在开发者工具中，我们已注意到该新闻的来源和时间是在同一个div中的，需手动通过一个正则表达式以一连串的空格将获取内容切分后，将拆分后的第一项赋予来源source，第二项赋予时间publish_date。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (date_format != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            fetch.<span class="property">publish_date</span> = <span class="built_in">eval</span>(date_format).<span class="title function_">replace</span>(<span class="string">&quot;发布日期：&quot;</span>, <span class="string">&quot;&quot;</span>).<span class="title function_">split</span>(<span class="regexp">/\s+/</span>)[<span class="number">1</span>]; <span class="comment">//刊登日期   </span></span><br><span class="line">            <span class="keyword">if</span> (regExp.<span class="title function_">exec</span>(fetch.<span class="property">publish_date</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">                fetch.<span class="property">publish_date</span> = regExp.<span class="title function_">exec</span>(fetch.<span class="property">publish_date</span>)[<span class="number">0</span>];</span><br><span class="line">                fetch.<span class="property">publish_date</span> = fetch.<span class="property">publish_date</span>.<span class="title function_">replace</span>(<span class="string">&#x27;年&#x27;</span>, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                fetch.<span class="property">publish_date</span> = fetch.<span class="property">publish_date</span>.<span class="title function_">replace</span>(<span class="string">&#x27;月&#x27;</span>, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                fetch.<span class="property">publish_date</span> = fetch.<span class="property">publish_date</span>.<span class="title function_">replace</span>(<span class="string">&#x27;日&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                fetch.<span class="property">publish_date</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(fetch.<span class="property">publish_date</span>).<span class="title function_">toFormat</span>(<span class="string">&quot;YYYY-MM-DD&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>同时，我们也注意使用replace函数去除一些不需要的内容。</p>
<p>最终，我们一共爬取了3158条数据存储于MySQL数据库中。<br><img src="https://img-blog.csdnimg.cn/20210427221943998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><p>完成了爬虫的代码后，我们尝试将爬取内容存入MySQL数据库中。这里使用MySQL Shell进入命令行操作界面，使用已经新建的crawl数据库，按下图结构新建名为fetches的表，包含非空自增的主键id_fetches、唯一属性url、来源source_name、编码source_encoding、标题title、关键词keywords、作者author、新闻发行时间publish_date、爬取时间crawltime、以及内容content。<br><img src="https://img-blog.csdnimg.cn/20210423232248952.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>之后，对爬虫代码进行修改，对爬取的每个url，判断其是否存在于数据库之中，若不在，则继续解析，并将获取内容插入数据库。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断url是否存在，不存在则调用newsGet函数继续解析</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ifInSql</span>(<span class="params">myURL, source_name, title_format, date_format, author_format, content_format, source_format</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> fetch_url_Sql = <span class="string">&#x27;select url from fetches where url=?&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> fetch_url_Sql_Params = [myURL];</span><br><span class="line">    mysql.<span class="title function_">query</span>(fetch_url_Sql, fetch_url_Sql_Params, <span class="keyword">function</span> (<span class="params">qerr, vals, fields</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (vals.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;URL duplicate!&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">newsGet</span>(myURL, source_name, title_format, date_format, author_format, content_format, source_format); <span class="comment">//读取新闻页面</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入mysql</span></span><br><span class="line"><span class="keyword">var</span> fetchAddSql = <span class="string">&#x27;INSERT INTO fetches(url,source_name,source_encoding,title,&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;keywords,author,publish_date,crawltime,content) VALUES(?,?,?,?,?,?,?,?,?)&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> fetchAddSql_Params = [fetch.<span class="property">url</span>, fetch.<span class="property">source</span>, fetch.<span class="property">source_encoding</span>,</span><br><span class="line">        fetch.<span class="property">title</span>, fetch.<span class="property">keywords</span>, fetch.<span class="property">author</span>, fetch.<span class="property">publish_date</span>,</span><br><span class="line">        fetch.<span class="property">crawltime</span>.<span class="title function_">toFormat</span>(<span class="string">&quot;YYYY-MM-DD HH24:MI:SS&quot;</span>), fetch.<span class="property">content</span></span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//执行sql，数据库中fetch表里的url属性是unique的，不会把重复的url内容写入数据库</span></span><br><span class="line">        mysql.<span class="title function_">query</span>(fetchAddSql, fetchAddSql_Params, <span class="keyword">function</span> (<span class="params">qerr, vals, fields</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (qerr) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(qerr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;); <span class="comment">//mysql写入</span></span><br></pre></td></tr></table></figure>

<p>·</p>
<h1 id="网站设计"><a href="#网站设计" class="headerlink" title="网站设计"></a>网站设计</h1><p>根据项目需求，我们考虑构建2个网页，一个用于进行新闻信息的查询，另一个用于查看关键词的热度分析信息。<br>此外，由于个人略带强迫的审美需求，实在看不下去光秃秃的前端界面，故设计了一下前端样式，存储于style.css文件中，在HTML中通过如下语句引入。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="分项全文搜索"><a href="#分项全文搜索" class="headerlink" title="分项全文搜索"></a>分项全文搜索</h2><p>我们设置3个搜索框，分别对应检索 <em>title、keywords、author</em> ，并将检索结果返回以表格形式呈现。<br>对于3个检索项目，可以分别检索，也可以组合检索，这个靠后端的SQL查询语句控制即可。同时，返回结果时我们也将给出一共有多少条记录数，并设置每一条记录的title为其对应链接，点击即跳转到与之相对应的新闻页面。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;padding:0 10em&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;searchbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title_text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;搜索标题&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;searchbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;keywords_text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;搜索关键词&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;searchbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;author_text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;搜索作者&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;searchbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;查询&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;search();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cardLayout&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 10px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;record&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">search</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(&quot;111111&quot;+$(&quot;input[name=&#x27;title_text&#x27;]&quot;).val()+ $(&quot;input[name=&#x27;keywords_text&#x27;]&quot;).val());</span></span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">get</span>(<span class="string">&#x27;/process_get?title=&#x27;</span> + $(<span class="string">&quot;input[name=&#x27;title_text&#x27;]&quot;</span>).<span class="title function_">val</span>() + <span class="string">&#x27;&amp;keywords=&#x27;</span> + $(<span class="string">&quot;input[name=&#x27;keywords_text&#x27;]&quot;</span>).<span class="title function_">val</span>() + <span class="string">&#x27;&amp;author=&#x27;</span> + $(<span class="string">&quot;input[name=&#x27;author_text&#x27;]&quot;</span>).<span class="title function_">val</span>(), <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">empty</span>();</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;p&gt;  共 &#x27;</span>+data.<span class="property">length</span>+<span class="string">&#x27; 条记录&lt;/p&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;tr class=&quot;cardLayout&quot;&gt;&lt;th&gt;title&lt;/th&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;&lt;th&gt;content&lt;/th&gt;&lt;th&gt;source&lt;/th&gt;&lt;th&gt;author&lt;/th&gt;&lt;th&gt;key&lt;/th&gt;&lt;th&gt;date&lt;/th&gt;&lt;/tr&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// console.log(i+&quot;: &quot;+data[i])</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> table = <span class="string">&#x27;&lt;tr class=&quot;cardLayout&quot;&gt;&lt;td&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                table += (<span class="string">&#x27;&lt;a href=&#x27;</span> + data[i].<span class="property">url</span> + <span class="string">&#x27;&gt;&#x27;</span> + data[i].<span class="property">title</span> + <span class="string">&#x27;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                table += (data[i].<span class="property">content</span> + <span class="string">&#x27;&lt;/td&gt;&lt;td&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                table += (data[i].<span class="property">source_name</span> + <span class="string">&#x27;&lt;/td&gt;&lt;td&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                table += (data[i].<span class="property">author</span> + <span class="string">&#x27;&lt;/td&gt;&lt;td&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                table += (data[i].<span class="property">keywords</span> + <span class="string">&#x27;&lt;/td&gt;&lt;td&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                table += (data[i].<span class="property">publish_date</span>.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">10</span>) + <span class="string">&#x27;&lt;/td&gt;&lt;/tr&gt;&#x27;</span>);  <span class="comment">// 日期只取精确到日</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">append</span>(table);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>与该功能相对应的后端我们设计如下，通过SQL查询语句按要求匹配所需信息并返回给前端。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/process_get&#x27;</span>, <span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">  <span class="comment">//sql字符串和参数</span></span><br><span class="line">  <span class="keyword">var</span> fetchSql = <span class="string">&quot;select url,title,content,source_name,author,keywords,publish_date &quot;</span> +</span><br><span class="line">    <span class="string">&quot;from fetches where title like &#x27;%&quot;</span> + request.<span class="property">query</span>.<span class="property">title</span> + <span class="string">&quot;%&#x27;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;and keywords like &#x27;%&quot;</span> + request.<span class="property">query</span>.<span class="property">keywords</span> + <span class="string">&quot;%&#x27;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;and author like &#x27;%&quot;</span> + request.<span class="property">query</span>.<span class="property">author</span> + <span class="string">&quot;%&#x27;&quot;</span>;</span><br><span class="line">  mysql.<span class="title function_">query</span>(fetchSql, <span class="keyword">function</span> (<span class="params">err, result, fields</span>) &#123;</span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    response.<span class="title function_">write</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(result));</span><br><span class="line">    response.<span class="title function_">end</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>比如，我们针对title中包含“新冠”的新闻进行查询，可以得到下图结果，共67条记录。<br><img src="https://img-blog.csdnimg.cn/20210427210801214.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>再比如，我们将查询要求丰富后，增加对keywords和author的指定，观察到这时满足要求的只有1条记录。<br><img src="https://img-blog.csdnimg.cn/20210427210655736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="关键词热度分析"><a href="#关键词热度分析" class="headerlink" title="关键词热度分析"></a>关键词热度分析</h2><p>考虑到设计页面的美观性、整洁性，我们将关键词热度分析这一模块放置于另一个html页面中，2个页面通过上方的导航栏进行链接，可以相互跳转。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;topnav&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;search.html&quot;</span>&gt;</span>新闻搜索<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>热度分析<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对于热度分析，我们考虑对用户输入的搜索关键词，展示每天的新闻中有多少条是包含它的。因此，我们只需要获取数据库中匹配项的时间，并通过字典存储各日期中包含该关键词的新闻条数，而后对字典的key（也即日期）按序排列，最终输出结果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;padding:0 10em&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;searchbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;keywords_text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;搜索关键词&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;searchbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;查询&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;searchKey();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cardLayout&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 10px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;record&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">searchKey</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">get</span>(<span class="string">&#x27;/keywords_get?keywords=&#x27;</span> + $(<span class="string">&quot;input:text&quot;</span>).<span class="title function_">val</span>(), <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">empty</span>();</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;tr class=&quot;cardLayout&quot;&gt;&lt;th&gt;日期&lt;/th&gt;&lt;th&gt;热度&lt;/th&gt;&lt;/tr&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> <span class="title class_">Date</span> = <span class="keyword">new</span> <span class="title class_">Array</span>();  <span class="comment">// 定义一个字典</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> publish_date = data[i].<span class="property">publish_date</span>.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (publish_date <span class="keyword">in</span> <span class="title class_">Date</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title class_">Date</span>[publish_date] += <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title class_">Date</span>[publish_date] = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> dateSort = <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">Date</span>).<span class="title function_">sort</span>();  <span class="comment">// dateSort是Date按key排序后的字典，其可以为0~n序号，value为排序后的Date的key</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> table = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> dateSort) &#123;</span></span><br><span class="line"><span class="language-javascript">                table += <span class="string">&#x27;&lt;tr class=&quot;cardLayout&quot;&gt;&lt;td&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                table += (dateSort[key] + <span class="string">&#x27;&lt;/td&gt;&lt;td&gt;&#x27;</span> + <span class="title class_">Date</span>[dateSort[key]] + <span class="string">&#x27;&lt;/td&gt;&lt;/tr&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">append</span>(table);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#record&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;p&gt;共 &#x27;</span> + data.<span class="property">length</span> + <span class="string">&#x27; 条新闻纪录&lt;/p&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>相应后端代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/keywords_get&#x27;</span>, <span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">  <span class="comment">//sql字符串和参数</span></span><br><span class="line">  <span class="keyword">var</span> fetchSql = <span class="string">&quot;select publish_date from fetches where keywords like &#x27;%&quot;</span> + request.<span class="property">query</span>.<span class="property">keywords</span> + <span class="string">&quot;%&#x27;&quot;</span>;</span><br><span class="line">  mysql.<span class="title function_">query</span>(fetchSql, <span class="keyword">function</span> (<span class="params">err, result, fields</span>) &#123;</span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    response.<span class="title function_">write</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(result));</span><br><span class="line">    response.<span class="title function_">end</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>最终效果：<br><img src="https://img-blog.csdnimg.cn/20210427220437740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdF9jaGlja2Vu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>·<br>项目完整代码见<a target="_blank" rel="noopener" href="https://github.com/itstime/Web-Programming">GitHub——Web Programming</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/nodejs/" rel="tag"># nodejs</a>
          
            <a href="/tags/Web%E7%BC%96%E7%A8%8B/" rel="tag"># Web编程</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/04/08/OS%E5%AE%9E%E8%AE%AD1%E2%80%94%E2%80%94Minix3%20shell%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/" rel="next" title="OS实训——Minix3 shell的简单实现">
                <i class="fa fa-chevron-left"></i> OS实训——Minix3 shell的简单实现
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/06/30/Web%E7%BC%96%E7%A8%8B%E6%9C%9F%E6%9C%AB%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94Angular+nodejs-express%E6%90%AD%E5%BB%BA%E7%AE%80%E6%98%93%E6%96%B0%E9%97%BB%E6%9F%A5%E8%AF%A2%E7%BD%91%E7%AB%99/" rel="prev" title="Web编程期末实践——Angular+nodejs-express搭建简易新闻查询网站">
                Web编程期末实践——Angular+nodejs-express搭建简易新闻查询网站 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/hyDududu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:hydududu@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%A7%88"><span class="nav-number">1.</span> <span class="nav-text">项目概览</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="nav-number">1.1.</span> <span class="nav-text">使用工具包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E6%A8%A1%E5%9D%97"><span class="nav-number">1.1.1.</span> <span class="nav-text">请求模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97"><span class="nav-number">1.1.2.</span> <span class="nav-text">数据解析模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97"><span class="nav-number">1.1.3.</span> <span class="nav-text">存储网页信息模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E7%BD%91%E9%A1%B5%E5%B1%95%E7%A4%BA%E6%A8%A1%E5%9D%97"><span class="nav-number">1.1.4.</span> <span class="nav-text">前端网页展示模块</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E7%88%AC%E5%8F%96"><span class="nav-number">2.</span> <span class="nav-text">网页爬取</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E5%88%86%E6%9E%90%E5%8F%8A%E7%88%AC%E8%99%AB%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.1.</span> <span class="nav-text">网站分析及爬虫设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E9%97%BBURL%E8%8E%B7%E5%8F%96"><span class="nav-number">2.1.1.</span> <span class="nav-text">新闻URL获取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E9%97%BB%E5%85%B7%E4%BD%93%E5%86%85%E5%AE%B9%E8%8E%B7%E5%8F%96"><span class="nav-number">2.1.2.</span> <span class="nav-text">新闻具体内容获取</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.2.</span> <span class="nav-text">数据库设计</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.</span> <span class="nav-text">网站设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E9%A1%B9%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2"><span class="nav-number">3.1.</span> <span class="nav-text">分项全文搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E8%AF%8D%E7%83%AD%E5%BA%A6%E5%88%86%E6%9E%90"><span class="nav-number">3.2.</span> <span class="nav-text">关键词热度分析</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hyDududu</span>
  
  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">9.8k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
